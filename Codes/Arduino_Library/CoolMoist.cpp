/*	LACOOL_CO's GENERAL LIBRARY
	TYPE : SENSOR	-	MODEL : Grove Moisture Sensor
	ROLE : 	Le Petit Cool Moisture Sensor
			Le Cool Stick Moisture Sensor
	@author Maximilien Daman	01/12/2015
	Mail : max@lacool.co	Web : www.lacool.co
 */

//Inclusion des librairies
/*	Conditional Inclusion - NOT WORKING
		#ifdef CoolStick_h
		#include "CoolStick.h"
		#elif defined(PetitCool_h)
		#include "PetitCool.h"
		#endif	
*/
	#include <CoolStick.h>

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////CONSTRUCTEURS///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////	
CoolMoist::CoolMoist()
{}

void CoolMoist::begin(uint8_t ConnectPin)
{
	Pin = ConnectPin + 54;
	pinMode(Pin, INPUT);
	setError(0);
}
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//////////////////////////////////ERRORLEVEL///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
uint8_t CoolMoist::errorlevel()
{	//A STABILISER//
/* //Initialisation:
	int NbTry = 2;
	int Temp[NbTry];
	int M[2*NbTry];
	int Test = 0;
//Test de fonctionnement:
	for(int i=0; i<NbTry; i++)
	{
		M[2*i] = analogRead(Pin);
		delay(1);
		M[2*i+1] = analogRead(Pin);
		delay(1);
		Temp[i] = (M[2*i]>M[2*i+1])?(M[2*i]-M[2*i+1]):(M[2*i+1]-M[2*i]);
		Temp[i] = (Temp[i]>2)?0:1;
	}
	for(int i=0; i<NbTry-1; i++)
	{
		Test += (Temp[2*i]==Temp[2*i+1]);
	}
 *///Niveau d erreur:
	ErrorLevel = 0;
	return ErrorLevel;
}
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////